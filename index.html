<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Climate comparison between Hong Kong, London, Sydney and Toronto</title>
    <!-- buefy stylesheet -->
    <link rel="stylesheet" href="https://unpkg.com/buefy/dist/buefy.min.css">
</head>

<body>
    <!-- css code needed for d3js charts -->
    <link rel="stylesheet" href="charts/d3js.css">

    <!-- d3js javascript (V5) -->
    <script src="https://d3js.org/d3.v5.min.js"></script>


    <section class="section is-small">

        <div id="background">
            <h4 class="subtitle is-4">Data story: Climate comparison between Hong Kong, London, Sydney and Toronto</h4>
            <p>Because of the ongoing social unrest, more and more Hong Kong people want to move to other countries.
                According to a recent survey, most people who want to migrate are interested in relocating to Canada or
                Australia.
                After the United Kingdom eased immigration rules for Hong Kong residents in July 2020, many Hong Kong
                people
                are also considering moving to the United Kingdom. When moving to a different city, climate is often an
                important factor to consider. In this data story, we will compare the climate of Hong Kong with three
                popular emigration destinations, namely London in the United Kingdom, Sydney in Australia, and Toronto
                in
                Canada, using monthly meteorological normals data of the four cities from 1981-2010 retrieved from
                government website.
                We will analyze which city is the best for Hong Kong people to emigrate based on the climate.</p><br>
            <br>
        </div>

        <section id="charts" class="columns">

            <div class="column is-half" id="temperature">
                <h4 class="subtitle is-4">Temperature</h4>
                <p>Hong Kong, as a subtropical city, has the highest mean temperature around the year, ranging from
                    mean daily minimum at 14.5°C during January, to mean daily maximum at 31.4°C during July. The
                    temperature difference between the day and night is the smallest, as shown in the table, the gap
                    between maximum and minimum temperatures in Hong Kong is the smallest of all four cities. 5 months
                    of summer Hong Kong (May to September) has a higher temperature than the optimal room temperature
                    range (18-24°C: green) (below 18°C: blue and above 24°C: red), which may cause heat related health
                    risks without cooling intervention. </p>
                <br>

                <p>London, Sydney, and Toronto all have lower mean temperatures and larger ranges of temperature
                    difference throughout the year when compared with Hong Kong. As shown in the table, the gap between
                    mean
                    daily minimum temperature and mean daily maximum temperature of the three cities are larger,
                    indicating the temperature
                    differences between the day and night in these three cities are higher than Hong Kong. People living
                    in these cities would need to prepare extra clothing to accommodate temperature differences when
                    going out. It is worth noting that the lowest minimum temperature of Toronto during December to
                    March is below 0°C, which may pose huge challenges to accommodate.</p>
                <br>

                <p>London and Toronto have 12 months and 11 months of mean daily minimum temperature lower than the
                    room temperature, which shows that the nights of these two cities are relatively cold, which is
                    harmful to health without proper insulation practices. Sydney citizens, on the other hand, can
                    enjoy 4 months of comfortable nights (December to March) where the mean daily minimum temperature is
                    within room temperature.</p>

            </div>


            <!-- import Vue -->
            <script src="https://unpkg.com/vue@2"></script>
            <script src="https://unpkg.com/buefy/dist/components/table"></script>
            <script src="https://unpkg.com/buefy/dist/components/input"></script>


            <div id="app">

                <div class="columns is-mobile is-multiline">
                    <div class="column is-half">
                        <table class="table is-narrow is-size-7-mobile">
                            <thead v-for="item in filters">
                                <tr>
                                    <th>{{item.city}}</th>
                                </tr>
                                <tr>
                                    <th>Month</th>
                                    <th>Min. °C</th>
                                    <th>Max. °C</th>
                                </tr>
                                <tr v-for="item2 in item.weather">
                                    <td>{{item2.monthname}}</td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Mintemp < 18},
                                        {'is-success': item2.Mintemp >= 18 && item2.Mintemp <= 24},
                                        {'is-danger': item2.Mintemp > 24},
                                        ]">
                                            {{item2.Mintemp}}
                                        </span>
                                    </td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Maxtemp < 18}, 
                                        {'is-success': item2.Maxtemp >= 18 && item2.Maxtemp <= 24},
                                        {'is-danger': item2.Maxtemp > 24}
                                        ]">
                                            {{item2.Maxtemp}}
                                        </span>
                                    </td>
                            </thead>
                        </table>
                    </div>
                    <div class="column is-half">
                        <table class="table is-narrow is-size-7-mobile">
                            <thead v-for="item in filters2">
                                <tr>
                                    <th>{{item.city}}</th>
                                </tr>
                                <tr>
                                    <th>Month</th>
                                    <th>Min. °C</th>
                                    <th>Max. °C</th>
                                </tr>
                                <tr v-for="item2 in item.weather">
                                    <td>{{item2.monthname}}</td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Mintemp < 18},
                                        {'is-success': item2.Mintemp >= 18 && item2.Mintemp <= 24},
                                        {'is-danger': item2.Mintemp > 24},
                                        ]">
                                            {{item2.Mintemp}}
                                        </span>
                                    </td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Maxtemp < 18}, 
                                        {'is-success': item2.Maxtemp >= 18 && item2.Maxtemp <= 24},
                                        {'is-danger': item2.Maxtemp > 24}
                                        ]">
                                            {{item2.Maxtemp}}
                                        </span>
                                    </td>

                            </thead>
                        </table>
                    </div>
                    <div class="column is-half">
                        <table class="table is-narrow is-size-7-mobile">
                            <thead v-for="item in filters3">
                                <tr>
                                    <th>{{item.city}}</th>
                                </tr>
                                <tr>
                                    <th>Month</th>
                                    <th>Min. °C</th>
                                    <th>Max. °C</th>
                                </tr>
                                <tr v-for="item2 in item.weather">
                                    <td>{{item2.monthname}}</td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Mintemp < 18},
                                        {'is-success': item2.Mintemp >= 18 && item2.Mintemp <= 24},
                                        {'is-danger': item2.Mintemp > 24},
                                        ]">
                                            {{item2.Mintemp}}
                                        </span>
                                    </td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Maxtemp < 18}, 
                                        {'is-success': item2.Maxtemp >= 18 && item2.Maxtemp <= 24},
                                        {'is-danger': item2.Maxtemp > 24}
                                        ]">
                                            {{item2.Maxtemp}}
                                        </span>
                                    </td>
                            </thead>
                        </table>
                    </div>
                    <div class="column is-half">
                        <table class="table is-narrow is-size-7-mobile">
                            <thead v-for="item in filters4">
                                <tr>
                                    <th>{{item.city}}</th>
                                </tr>
                                <tr>
                                    <th>Month</th>
                                    <th>Min. °C</th>
                                    <th>Max. °C</th>
                                </tr>
                                <tr v-for="item2 in item.weather">
                                    <td>{{item2.monthname}}</td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Mintemp < 18},
                                        {'is-success': item2.Mintemp >= 18 && item2.Mintemp <= 24},
                                        {'is-danger': item2.Mintemp > 24},
                                        ]">
                                            {{item2.Mintemp}}
                                        </span>
                                    </td>
                                    <td>
                                        <span :class="['tag',
                                        {'is-primary': item2.Maxtemp < 18}, 
                                        {'is-success': item2.Maxtemp >= 18 && item2.Maxtemp <= 24},
                                        {'is-danger': item2.Maxtemp > 24}
                                        ]">
                                            {{item2.Maxtemp}}
                                        </span>
                                    </td>

                            </thead>
                        </table>
                    </div>
                </div>
            </div>

            <script>
                var app = new Vue({
                    el: "#app",
                    async mounted() {

                        var response = await fetch("https://api.npoint.io/cdbb11536e0322ac5f2c");

                        if (response.ok) {
                            this.data = await response.json();
                            console.log(JSON.stringify(this.data));
                        } else {
                            console.log(response.statusText);
                        }
                    },
                    data: () => ({
                        data: [] // initialise to an empty array
                    }),
                    methods: {},
                    computed: {
                        filters() {
                            return this.data.filter(item => item.city === 'HK')
                        },
                        filters2() {
                            return this.data.filter(item => item.city === 'London')
                        },
                        filters3() {
                            return this.data.filter(item => item.city === 'Sydney')
                        },
                        filters4() {
                            return this.data.filter(item => item.city === 'Toronto')
                        },
                    }
                });
            </script>


        </section>

        <section id="charts" class="columns">

            <div class="column is-one-third" id="sunshine">
                <h4 class="subtitle is-4">Sunshine</h4>
                <p>Lack of sunshine is related to multiple health issues, ranging from vitamin D insufficiency to
                    higher suicide rates. Fig. 2a & 2b shows London has the least sunshine throughout the year at only
                    1540 hours per year, following Hong Kong and Toronto at 1836 and 2066 hours per year respectively.
                    Sydney has the most sunshine per year at 2593 hours. Sydney also has the most even hours of sunshine
                    throughout the year, ranging from 176.7 hours in May to 246.0 hours in November. Toronto has the
                    most uneven hours of sunshine throughout the year, ranging from a minimum of 78.1 hours in December,
                    to 279.6 hours in July. 6 months (September to February) of London have the least amount of sunshine
                    compared to other countries, meaning London citizens will have the longest period of time not being
                    able to enjoy sunshine, and the positive health effects it brings.</p>

            </div>

            <!-- sunshine chart -->
            <div class="column">
                <h1>Fig. 2a Sunshine</h1>
                <div id="sunshineChart"></div>
                <script src="charts/sunshinechart.js"></script>
            </div>

            <!-- sunshine annual chart -->
            <div class="column">
                <h1>Fig. 2b Sunshine (annual)</h1>
                <div id="sunshineannualchart"></div>
                <script src="charts/sunshineannualchart.js"></script>
            </div>



        </section>

        <section id="charts" class="columns">

            <div class="column is-one-third" id="rainfall">
                <h4 class="subtitle is-4">Rainy days and rainfall</h4>
                <p>Rainy days, especially days with heavy rainfall, would pose difficulties for transportation, and
                    sometimes cause floods. For amounts of rainfall throughout the year, Fig. 3a & 3b shows Hong Kong
                    has significantly higher rainfall than the other three countries at 2,399 yearly, and most of the heavy rainfalls occur
                    during summer (May to September). London, Sydney and Toronto all have relatively even amounts of
                    rainfall throughout the year. This indicates that Hong Kong is most likely to suffer from heavy rains and people have to
                    travel through rainy weathers throughout most of the summer.</p>

            </div>

            <!-- rainfall chart -->
            <div class="column">
                <h1>Fig. 3a Rainfall</h1>
                <div id="rainfallChart"></div>
                <script src="charts/rainfallchart.js"></script>
            </div>

            <!-- rainfall annual chart -->
            <div class="column">
                <h1>Fig. 3b Rainfall (annual)</h1>
                <div id="rainfallannualchart"></div>
                <script src="charts/rainfallannualchart.js"></script>
            </div>

        </section>

        <section id="charts" class="columns">

            <div class="column is-one-third">
                <h4 class="subtitle is-4" id="daysofrainfall">Days of rainfall</h4>
                <p>As shown in Fig. 4a & 4b, Hong Kong has the highest number of rainy days
                    throughout the year at 137.63, followed by London and Toronto, with Sydney being the city with least
                    rainy days at 98.30. Hong Kong has notably more rainy days throughout the summer (May to September),
                    London, Sydney have relatively even numbers of rainy days throughout the year, while Toronto have
                    less rainy days during the winter (December to February).</p>

            </div>

            <!-- days of rainfall chart -->
            <div class="column">
                <h1>Fig. 4a Days of Rainfall</h1>
                <div id="daysofrainfallchart"></div>
                <script src="charts/daysofrainfallchart.js"></script>
            </div>

            <!-- days of rainfall annual chart -->
            <div class="column">
                <h1>Fig. 4b Days of Rainfall (annual)</h1>
                <div id="daysofrainfallannualchart"></div>
                <script src="charts/daysofrainfallannualchart.js"></script>
            </div>

        </section>

        <section class="columns">
            <div class="column">
                <h4 class="subtitle is-4" id="conclusion">Conclusion</h4>
                <p>Out of all three popular cities for emigration destinations, Sydney has the most comfortable
                    temperature, most sunshine, least rainy days, and even amount of rainfall throughout the year. These
                    factors make Sydney the best city to relocate in terms of climate.
                    While Toronto has more sunlight and less rains compared to Hong Kong, new immigrants may face
                    challenges in overcoming the cold temperature during its winters. London, while being slightly
                    warmer than Toronto in the winter, has the least sunshine and second-most rainy days among the four
                    cities, which means new immigrants have to adapt to the gloomy climate if they choose to relocate to
                    London.
                    Overall, Hong Kong people would enjoy fewer rainy days and less heavy rainfalls if they choose to
                    move to either of the three popular cities, including the rumored “Rainy London”.
                </p>
            </div>
        </section>

        <br>
        <br>

    </section>

</body>

</html>